<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <link rel="stylesheet" href="popup.css">
</head>
<body>
  <div class="popup-container">
    <!-- Header -->
    <div class="header">
      <div class="logo">
        <span class="icon">🤝</span>
        <span class="title">LinkedIn Helper</span>
      </div>
      <div class="status">
        <span id="connection-status" class="status-indicator">●</span>
        <span id="status-text">Ready</span>
      </div>
    </div>

    <!-- Navigation Tabs -->
    <div class="tabs">
      <button class="tab-button active" data-tab="personal">
        <span class="tab-icon">👤</span>
        Personal
      </button>
      <button class="tab-button" data-tab="templates">
        <span class="tab-icon">📝</span>
        Templates
      </button>
      <button class="tab-button" data-tab="settings">
        <span class="tab-icon">⚙️</span>
        Settings
      </button>
    </div>

    <!-- Tab Contents -->
    <div class="tab-content">
      
      <!-- Personal Info Tab -->
      <div id="personal-tab" class="tab-panel active">
        <div class="section-title">Personal Information</div>
        
        <form id="personal-form">
          <div class="form-group">
            <label for="firstName">First Name</label>
            <input type="text" id="firstName" placeholder="e.g., Sachin" maxlength="50" required>
          </div>
          
          <div class="form-group">
            <label for="lastName">Last Name</label>
            <input type="text" id="lastName" placeholder="e.g., Adlakha" maxlength="50" required>
          </div>
          
          <div class="form-group">
            <label for="email">Email</label>
            <input type="email" id="email" placeholder="e.g., sa9082@nyu.edu" maxlength="100" required>
          </div>
          
          <div class="form-group">
            <label for="phone">Phone Number</label>
            <input type="tel" id="phone" placeholder="e.g., 6466335776" maxlength="20">
          </div>
          
          <div class="form-group">
            <label for="university">University</label>
            <input type="text" id="university" placeholder="e.g., NYU" maxlength="100">
          </div>
          
          <div class="form-group">
            <label for="degree">Degree Program</label>
            <input type="text" id="degree" placeholder="e.g., MS in Computer Science" maxlength="100">
          </div>
          
          <div class="form-group">
            <label for="resumeUrl">Resume URL</label>
            <input type="url" id="resumeUrl" placeholder="e.g., https://drive.google.com/file/d/..." maxlength="500">
          </div>
          
          <div class="form-actions">
            <button type="submit" class="btn btn-primary">Save Information</button>
            <button type="button" class="btn btn-secondary" id="test-variables">Test Variables</button>
          </div>
        </form>

        <div class="info-box">
          <div class="info-title">💡 How It Works</div>
          <div class="info-text">
            Your information will be automatically inserted into message templates based on the connection type you choose.
          </div>
        </div>
      </div>

      <!-- Templates Tab -->
      <div id="templates-tab" class="tab-panel">
        <div class="section-title">Message Templates</div>
        
        <div class="template-selector">
          <label style="display: block; margin-bottom: 10px; font-weight: 600;">Message Type</label>
          
          <!-- Using styled radio buttons instead of problematic select -->
          <div class="message-type-options">
            <label class="message-type-option">
              <input type="radio" name="messageType" value="newConnection" id="msg-new" checked>
              <span class="option-label">
                <span class="option-icon">🔗</span>
                <span class="option-text">New Connection Request</span>
              </span>
            </label>
            
            <label class="message-type-option">
              <input type="radio" name="messageType" value="afterAcceptance" id="msg-after">
              <span class="option-label">
                <span class="option-icon">✅</span>
                <span class="option-text">Message After Acceptance</span>
              </span>
            </label>
            
            <label class="message-type-option">
              <input type="radio" name="messageType" value="alreadyConnected" id="msg-already">
              <span class="option-label">
                <span class="option-icon">💬</span>
                <span class="option-text">Already Connected</span>
              </span>
            </label>
          </div>
          
          <div class="template-help-text" style="margin-top: 10px; font-size: 11px; color: #666;">
            <div id="template-usage-hint">🔗 Use when clicking Connect → Add a note</div>
          </div>
        </div>

        <div class="form-group">
          <label for="companyName">Company Name</label>
          <input type="text" id="companyName" placeholder="e.g., Fiserv, Uber, Ontra" maxlength="100">
        </div>
        
        <div class="form-group">
          <label for="positionTitle">Position Title</label>
          <input type="text" id="positionTitle" placeholder="e.g., Summer Intern 2025, Software Engineer" maxlength="200">
        </div>
        
        <div class="form-group">
          <label for="opportunityType">Opportunity Type</label>
          <input type="text" id="opportunityType" placeholder="e.g., internship opportunities, full-time roles" maxlength="100" value="internship opportunities">
          <div style="font-size: 11px; color: #666; margin-top: 4px;">
            Examples: "internship opportunities", "full-time roles", "new grad positions"
          </div>
        </div>
        
        <div class="form-group">
          <label for="timeline">Timeline/Period</label>
          <input type="text" id="timeline" placeholder="e.g., Summer 2025, Fall 2024, starting May 2025" maxlength="100" value="Summer 2025">
          <div style="font-size: 11px; color: #666; margin-top: 4px;">
            Examples: "Summer 2025", "Fall 2024", "starting January 2025", "2025"
          </div>
        </div>
        
        <div class="form-group" id="jobLinksGroup">
          <label for="jobLinks">Job Link(s)</label>
          <textarea id="jobLinks" rows="3" placeholder="Enter job links (one per line)"></textarea>
        </div>
        
        <div class="form-group" id="recipientNameGroup" style="display: none;">
          <label for="recipientName">Recipient's Name</label>
          <input type="text" id="recipientName" placeholder="Will be auto-filled from LinkedIn profile" maxlength="100">
        </div>

        <div class="template-options">
          <label class="checkbox-wrapper">
            <input type="checkbox" id="auto-detect-profile" checked>
            <span class="checkmark"></span>
            Auto-detect profile information
          </label>
          <label class="checkbox-wrapper">
            <input type="checkbox" id="preview-before-send" checked>
            <span class="checkmark"></span>
            Preview message before inserting
          </label>
        </div>

        <div class="template-preview">
          <div class="preview-title">
            Message Preview
            <span id="char-counter" style="float: right; font-size: 12px; color: #666;"></span>
          </div>
          <div id="template-preview-text" class="preview-text">
            Fill in the fields above to see the message preview...
          </div>
        </div>

        <div class="template-actions">
          <button class="btn btn-primary" id="save-template-settings">Save Template Settings</button>
          <button class="btn btn-secondary" id="copy-message">Copy Message</button>
          <button class="btn btn-secondary" id="reset-template">Reset Fields</button>
        </div>

        <div class="info-box" style="margin-top: 20px;">
          <div class="info-title">📌 How to Use Each Message Type</div>
          <div class="info-text" style="line-height: 1.6;">
            <strong>🔗 New Connection Request:</strong><br>
            • Click "Connect" on someone's profile<br>
            • Click "Add a note" when the modal appears<br>
            • Message will auto-fill with their name detected<br><br>
            
            <strong>✅ Message After Acceptance:</strong><br>
            • Go to LinkedIn messaging or open a chat<br>
            • Click the ✉️ button (appears on messaging pages)<br>
            • Or use keyboard shortcut: Ctrl+Shift+M (Cmd+Shift+M on Mac)<br>
            • Message will auto-fill with recipient's name<br><br>
            
            <strong>💬 Already Connected:</strong><br>
            • Same as above - open their message thread<br>
            • Click ✉️ button or use Ctrl+Shift+M<br>
            • Includes your contact details for referral
          </div>
        </div>
      </div>

      <!-- Settings Tab -->
      <div id="settings-tab" class="tab-panel">
        <div class="section-title">Extension Settings</div>
        
        <div class="settings-group">
          <div class="setting-item">
            <label class="checkbox-wrapper">
              <input type="checkbox" id="extension-enabled" checked>
              <span class="checkmark"></span>
              Extension Enabled
            </label>
            <div class="setting-description">Enable/disable the LinkedIn Connection Helper</div>
          </div>

          <div class="setting-item">
            <label class="checkbox-wrapper">
              <input type="checkbox" id="notifications-enabled" checked>
              <span class="checkmark"></span>
              Show Notifications
            </label>
            <div class="setting-description">Display success/error notifications</div>
          </div>

          <div class="setting-item">
            <label class="checkbox-wrapper">
              <input type="checkbox" id="debug-mode">
              <span class="checkmark"></span>
              Debug Mode
            </label>
            <div class="setting-description">Enable detailed console logging</div>
          </div>

          <div class="setting-item">
            <label class="checkbox-wrapper">
              <input type="checkbox" id="show-detected-info" checked>
              <span class="checkmark"></span>
              Show Detected Info
            </label>
            <div class="setting-description">Display detected profile information</div>
          </div>
        </div>

        <div class="settings-group">
          <div class="section-title">Data Management</div>
          
          <div class="data-actions">
            <button class="btn btn-secondary" id="export-settings">Export Settings</button>
            <button class="btn btn-secondary" id="import-settings">Import Settings</button>
            <button class="btn btn-danger" id="reset-settings">Reset to Defaults</button>
          </div>
          
          <div class="storage-info">
            <div class="storage-label">Storage Usage:</div>
            <div class="storage-bar">
              <div id="storage-progress" class="storage-fill" style="width: 0%"></div>
            </div>
            <div id="storage-text" class="storage-text">Loading...</div>
          </div>
        </div>

        <div class="footer-info">
          <div class="version">v3.0 - Multi-Template System</div>
          <div class="privacy">No data sent to external servers</div>
        </div>
      </div>
    </div>

    <!-- Loading Overlay -->
    <div id="loading-overlay" class="loading-overlay hidden">
      <div class="loading-spinner"></div>
      <div class="loading-text">Loading...</div>
    </div>

    <!-- Notification Toast -->
    <div id="notification-toast" class="notification-toast hidden">
      <span id="notification-message"></span>
    </div>
  </div>

  <script src="popup.js"></script>
</body>
</html>